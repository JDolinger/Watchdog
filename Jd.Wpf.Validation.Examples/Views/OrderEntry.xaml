<UserControl x:Class="Jd.Wpf.Validation.Examples.Views.OrderEntry"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
        xmlns:Validation="clr-namespace:Jd.Wpf.Validation;assembly=Jd.Wpf.Validation" 
        xmlns:Views="clr-namespace:Jd.Wpf.Validation.Examples.Views" 
        xmlns:sys="clr-namespace:System;assembly=mscorlib" xmlns:Internal="clr-namespace:Jd.Wpf.Validation.Internal;assembly=Jd.Wpf.Validation">

    <UserControl.Resources>
        <x:Array x:Key="TradeTypeList" Type="{x:Type sys:String}">
            <sys:String>Buy</sys:String>
            <sys:String>Sell</sys:String>
            <sys:String>Short</sys:String>
        </x:Array>
        
        <Internal:SafeTypeToStringConverter x:Key="String2Int"/>
    </UserControl.Resources>
    <Grid Validation:ValidationProperties.ErrorSource="{Binding ValidationErrors}">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <Expander Header="Parameters">
            <Views:TradingParameters />
        </Expander>
        
        <WrapPanel Grid.Row="1" >
            <WrapPanel.Resources>
                <Style TargetType="{x:Type HeaderedContentControl}" BasedOn="{StaticResource HeaderedEntry}" />
            </WrapPanel.Resources>
            <HeaderedContentControl Header="Side" >
                <ComboBox Width="100" SelectedValue="{Binding Side}" ItemsSource="{StaticResource TradeTypeList}" />
            </HeaderedContentControl>
            <HeaderedContentControl Header="Symbol">
                <TextBox Width="100" Text="{Binding Symbol, NotifyOnValidationError=True}"/>
            </HeaderedContentControl>
            <HeaderedContentControl Header="Quantity">
                <TextBox Width="100" Text="{Validation:WatchdogBinding Quantity, UseGenericTextConverter=True}"/>
            </HeaderedContentControl>
            <HeaderedContentControl Header="Price">
                <TextBox Width="100" Text="{Validation:WatchdogBinding Price, UseGenericTextConverter=True}"/>
            </HeaderedContentControl>
            <HeaderedContentControl Header="Order Total">
                <TextBlock Width="100" Text="{Binding Total, NotifyOnValidationError=True}"/>
            </HeaderedContentControl>
            <TextBlock Text="{Binding ValidationErrors.Count}"/>
        </WrapPanel>
        
        <Button Content="Book It" 
                Grid.Row="2" 
                Margin="20,10,20,10"
                Height="30" 
                Width="80" 
                HorizontalAlignment="Left" 
                Command="{Binding BookTicketCommand}" />
    </Grid>
</UserControl>
